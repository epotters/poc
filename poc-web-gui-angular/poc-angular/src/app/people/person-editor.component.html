<mat-card class="form-card">
  <mat-card-header>
    <mat-card-title>{{title}}</mat-card-title>
  </mat-card-header>
  <mat-card-content>

    <form [formGroup]="entityForm">

      <div class="form-row">

        <!-- ID-->
        <div>
          <mat-form-field>
            <mat-label>ID</mat-label>
            <input matInput formControlName="id" name="id" readonly>
            <mat-hint>Generated id</mat-hint>
          </mat-form-field>
        </div>

      </div>


      <div class="form-row">

        <!-- First name-->
        <mat-form-field>
          <mat-label>First Name</mat-label>
          <input matInput formControlName="firstName" name="firstName" required>
          <mat-error *ngFor="let validation of meta.columnConfigs['firstName']validators">
            <mat-error class="error-message" *ngIf="hasErrorOfType('firstName', validation.type)">
              {{validation.message}}
            </mat-error>
          </mat-error>
        </mat-form-field>

        <!-- Prefix-->
        <mat-form-field style="flex: 1">
          <mat-label>Prefix</mat-label>
          <input matInput formControlName="prefix" name="prefix">
          <mat-hint>Like 'van der' or 'de la'</mat-hint>
        </mat-form-field>

        <!-- Last name-->
        <mat-form-field style="flex: 3">
          <mat-label>Last Name</mat-label>
          <input matInput formControlName="lastName" name="lastName" required>
          <mat-hint>Enter your family name here</mat-hint>
          <mat-error *ngFor="let validation of meta.columnConfigs['lastName'].validators">
            <mat-error class="error-message" *ngIf="hasErrorOfType('lastName', validation.type)">
              {{validation.message}}
            </mat-error>
          </mat-error>
        </mat-form-field>
      </div>

      <div class="form-row">

        <!-- Gender-->
        <mat-form-field style="flex: 2">
          <mat-label>Gender</mat-label>
          <mat-select formControlName="gender" name="gender" required>
            <mat-option [value]="">-</mat-option>
            <mat-option [value]="option.value" [id]="'gender-option-' + option.value.toLowerCase()"
                        *ngFor="let option of meta.columnConfigs['gender'].editor.options">{{option.label}}</mat-option>
          </mat-select>
        </mat-form-field>

        <div style="flex: 3"></div>

      </div>


      <div class="form-row">

        <!-- Date of birth-->
        <mat-form-field style="flex: 2">
          <mat-label>Date of birth</mat-label>
          <input matInput formControlName="birthDate" [matDatepicker]="birthDatePicker">
          <mat-datepicker-toggle matSuffix [for]="birthDatePicker"></mat-datepicker-toggle>
          <mat-datepicker #birthDatePicker></mat-datepicker>
        </mat-form-field>

        <!-- Place of birth-->
        <mat-form-field style="flex: 3">
          <mat-label>Place of birth</mat-label>
          <input matInput formControlName="birthPlace" name="birthPlace">
          <mat-hint>Native place city</mat-hint>
        </mat-form-field>

        <!-- Country of birth-->
        <mat-form-field style="flex: 1">
          <mat-label></mat-label>
          <input matInput name="birthCountryCode">
          <mat-hint>Country code will be added soon</mat-hint>
        </mat-form-field>

      </div>

    </form>

    <person-employers-relation-card [ownerSubject]="entitySubject"></person-employers-relation-card>


  </mat-card-content>

  <mat-card-actions align="end">
    <button (click)="goToList()" *ngIf="!isManaged" mat-icon-button>
      <mat-icon>menu</mat-icon>
    </button>

    <span class="fill-remaining-space"></span>

    <button (click)="deleteEntity()" [disabled]="isNew()" mat-icon-button>
      <mat-icon>delete_outline</mat-icon>
    </button>
    <button (click)="revert()" [disabled]="!entityForm.dirty" mat-icon-button>
      <mat-icon>keyboard_return</mat-icon>
    </button>
    <button (click)="saveEntity()" [disabled]="!entityForm.dirty || entityForm.invalid" color="primary" mat-icon-button>
      <mat-icon>done</mat-icon>
    </button>
  </mat-card-actions>

</mat-card>

