<mat-card class="form-card">

  <mat-card-header>
    <mat-card-title>{{title}}</mat-card-title>
  </mat-card-header>

  <mat-card-content>

    <form [formGroup]="entityForm" class="main-form">


      <div class="form-row" style="flex: 1">

        <!-- ID -->
        <mat-form-field class="editor-type-none">
          <mat-label>ID</mat-label>
          <input formControlName="id" matInput name="id" readonly>
        </mat-form-field>

        <div style="flex: 6"></div>
      </div>

      <div class="form-row">

        <!-- Start date -->
        <mat-form-field style="flex: 2">
          <mat-label>Start date</mat-label>
          <input [matDatepicker]="startDatePicker" formControlName="startDate" matInput>
          <mat-datepicker-toggle [for]="startDatePicker" matSuffix></mat-datepicker-toggle>
          <mat-datepicker #startDatePicker></mat-datepicker>
        </mat-form-field>

        <!-- End date -->
        <mat-form-field style="flex: 2">
          <mat-label>End date</mat-label>
          <input [matDatepicker]="endDatePicker" formControlName="endDate" matInput>
          <mat-datepicker-toggle [for]="endDatePicker" matSuffix></mat-datepicker-toggle>
          <mat-datepicker #endDatePicker></mat-datepicker>
        </mat-form-field>

        <div style="flex: 3"></div>
      </div>

      <div class="form-row">

        <!-- Employer -->
        <mat-form-field style="flex: 2">
          <mat-label>Employer</mat-label>
          <entity-selector
            formControlName="employer"
            [meta]="organizationService.meta"
            [service]="organizationService"
            [autoActiveFirstOption]=true
            required>
          </entity-selector>
          <mat-hint>Choose an employer</mat-hint>
          <mat-error>Employer is required</mat-error>
        </mat-form-field>

        <!-- Employee -->
        <mat-form-field style="flex: 2">
            <mat-label>Employee</mat-label>
            <entity-selector
              formControlName="employee"
              [meta]="personService.meta"
              [service]="personService"
              [autoActiveFirstOption]=true
              required>
            </entity-selector>
            <mat-hint>Choose an employee</mat-hint>
            <mat-error>Employee is required</mat-error>
        </mat-form-field>
      </div>

      <div class="form-row">

        <!-- Description -->
        <mat-form-field style="flex: 1">
          <mat-label>Description</mat-label>
          <textarea formControlName="description" matInput matTextareaAutosize></textarea>
        </mat-form-field>
      </div>

    </form>
  </mat-card-content>

  <mat-card-actions align="end">
    <button (click)="goToList()" *ngIf="!isManaged" mat-icon-button>
      <mat-icon>menu</mat-icon>
    </button>

    <span class="fill-remaining-space"></span>

    <button (click)="deleteEntity()" [disabled]="isNew()" mat-icon-button>
      <mat-icon>delete_outline</mat-icon>
    </button>
    <button (click)="revert()" [disabled]="!entityForm.dirty" mat-icon-button>
      <mat-icon>keyboard_return</mat-icon>
    </button>
    <button (click)="saveEntity()" [disabled]="!entityForm.dirty || entityForm.invalid" color="primary" mat-icon-button>
      <mat-icon>done</mat-icon>
    </button>
  </mat-card-actions>

</mat-card>
